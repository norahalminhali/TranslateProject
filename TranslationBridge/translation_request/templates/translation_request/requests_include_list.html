<style>
body {
  background-image: url('/static/images/back.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}
</style>
{% if request.user.is_authenticated %}

<div class="container py-4 bg-requests">
  <div class="text-center mb-4">
  <h1 style="font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; color: #03111fdb; font-size:2.6rem; font-weight:700; letter-spacing:1px; text-shadow:0 2px 8px rgba(36,113,163,0.18); border: 3px solid #222; border-radius: 18px; display: inline-block; padding: 10px 32px; background: transparent;">Customer Requests</h1>
  </div>
<br>
<form method="GET" class="row g-3 mb-4">

    <!-- فلتر نوع الطلب -->
    <div class="col-md-4">
        <label class="form-label fw-bold">Request Type</label>
        <select name="type" class="form-select">
            <option value="">All</option>
            <option value="instant" {% if request.GET.type == "instant" %}selected{% endif %}>Instant Translation</option>
            <option value="hire" {% if request.GET.type == "hire" %}selected{% endif %}>Hire a Translator</option>
        </select>
    </div>

  <div class="col-md-3 d-flex align-items-end">
    <button class="btn btn-dark w-100" type="submit">Filter</button>
    </div>

</form>
    <div class="row row-cols-1 row-cols-md-3 g-4">
      {% for req in requests %}
        <div class="col">
    <div class="card h-100 shadow-sm border-0" style="border-radius: 18px; background: rgba(255,255,255,0.55);">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-2">
                <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-2" style="width:40px; height:40px;">
                  <i class="bi bi-briefcase" style="font-size:1.3rem;"></i>
                </div>
                <h5 class="card-title mb-0">{{ req.company_name }}</h5>
                <span class="badge bg-info ms-auto">{{ req.company_type }}</span>
              </div>
              <small class="text-muted mb-2">Type: {{ req.request_type }}</small>
              <small class="text-muted mb-2">Status: {{ req.status }}</small>
              <p class="card-text flex-grow-1">{{ req.description|truncatewords:15 }}</p>
              <a href="{% url 'translation_request:request_detail_view' req.pk %}" class="btn btn-outline-primary btn-sm mt-2 w-100">Details</a>
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col">
          <div class="alert alert-warning">No requests found.</div>
        </div>
      {% endfor %}
    </div>
  </div>
<br>
<br>
<br>
<br>

<br>
<br>
<br>

<br>
<br>
<br>
{% endif %}