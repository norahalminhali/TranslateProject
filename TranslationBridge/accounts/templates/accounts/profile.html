{% extends 'main/base.html' %}

{% block title %} Profile page {% endblock %}

{% block content %}

<div class="container py-5">
    <div class="row align-items-center justify-content-center">
        
        <div class="col-md-4 d-flex flex-column align-items-start justify-content-start" style="padding-left: 0px; padding-top: 0px;">
            
                <img src="{{user.profile.avatar.url}}" alt="Avatar" style="width:120px; height:120px; object-fit:cover; border-radius:50%; box-shadow:0 0 12px #c8b08b99; margin-bottom:8px; margin-top:-240px; animation:pulse 2.5s infinite;">
            
            <p class="mt-2 text-muted" style="font-size:2rem; margin-left: 8px;"> {{request.user.first_name}} </p>    
        </div>

            <div class="col-md-6" style="margin-top:160px;">
                    <div style="background:#fff9f3; border-radius:18px; box-shadow:0 4px 24px #c8b08bc8; padding:32px 28px; margin-left:-280px;">
                    {% if request.user == user %} 
                        <a href="{% url 'accounts:update_profile_view' %}"><i class="w-50 bi-pencil-square"></i></a> <!-- ايقونه تعديل الملف الشخصي  -->
                    {% endif %}
                        <h2 style="font-size:2rem; font-weight:700; color:#a67c52; margin-bottom:32px; text-align:left; font-family: 'Courier New', Courier, monospace;">PROFILE</h2>
                              
                        <div style="display:flex; flex-direction:column; gap:18px;">
                            <div style="display:flex; align-items:center; gap:12px;">
                                <span style="font-weight:600; color:#a67c52; min-width:100px;">@Username:</span>
                                <span style="font-weight:500; color:#6e4c1b;">{{request.user.username}}</span>
                            </div>
                            <div style="display:flex; align-items:center; gap:12px;">
                                <span style="font-weight:600; color:#a67c52; min-width:100px;">First Name</span>
                                <span style="font-weight:500; color:#6e4c1b;">{{request.user.first_name}}</span>
                            </div>
                            <div style="display:flex; align-items:center; gap:12px;">
                                <span style="font-weight:600; color:#a67c52; min-width:100px;">Last Name</span>
                                <span style="font-weight:500; color:#6e4c1b;">{{request.user.last_name}}</span>
                            </div>
                            <div style="display:flex; align-items:center; gap:12px;">
                                <span style="font-weight:600; color:#a67c52; min-width:100px;">E-mail:</span>
                                <span style="font-weight:500; color:#6e4c1b;">{{request.user.email}}</span>
                            </div>
                           <!-- <div>
                                <span style="font-weight:600; color:#a67c52;">About Me:</span>
                                <div style="font-weight:500; color:#6e4c1b; background:#fff; border-radius:10px; padding:12px 18px; margin-top:8px; border:1px solid #c8b08b;">
                                    I am Asen Krekmanov and I am dedicated UI/UX Designer from Sofia, Bulgaria.
                                </div>
                            </div>-->
                        </div>
                            <div class="d-flex gap-3 mt-4">
                                <a href="#" class="social-circle" style="background:#fff2e0; color:#3b5998; border-radius:50%; width:52px; height:52px; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px #c8b08b22; font-size:1.7rem; transition:box-shadow 0.2s; text-decoration:none;">
                                    <i class="fab fa-facebook"></i>
                                </a>
                                <a href="#" class="social-circle" style="background:#fff2e0; color:#1da1f2; border-radius:50%; width:52px; height:52px; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px #c8b08b22; font-size:1.7rem; transition:box-shadow 0.2s; text-decoration:none;">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="social-circle" style="background:#fff2e0; color:#e1306c; border-radius:50%; width:52px; height:52px; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px #c8b08b22; font-size:1.7rem; transition:box-shadow 0.2s; text-decoration:none;">
                                    <i class="fab fa-instagram"></i>
                                </a>
                                <a href="#" class="social-circle" style="background:#fff2e0; color:#ea4335; border-radius:50%; width:52px; height:52px; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px #c8b08b22; font-size:1.7rem; transition:box-shadow 0.2s; text-decoration:none;">
                                    <i class="fab fa-google-plus-g"></i>
                                </a>
                            </div>
                    </div>
            </div>   
    </div>

    <h3>{{user.first_name}}</h3>

    <!-- Reviews Section -->
       {% for review in user.review_set.all %}
            <div class="d-flex align-items-start p-3 shadow-sm rounded bg-white" style="gap: 16px;">
                <img src="{{ review.user.profile.avatar.url }}" class="rounded-circle border" style="width: 48px; height: 48px; object-fit: cover; margin-top: 4px;" />
                <div class="flex-grow-1">
                    <div class="d-flex align-items-center gap-2 mb-1">
                        <a href="{% url 'accounts:profile_view' %}" class="text-decoration-none">
                            <span class="fw-semibold text-dark">{{ review.user.username }} {{ review.user.last_name }}</span>
                        </a>
                        <span class="text-muted small ms-2">{{ review.created_at|date:"Y-m-d H:i" }}</span>
                    </div>
                    <p class="mb-0 text-secondary" style="font-size: 1.05rem;">{{ review.comment }}</p>
                    <a href="{% url 'translators:translator_detail_view' review.translator.id %}"><h6>On Translator {{ review.translator.name }}</h6></a>

                    <p class="mb-0 text-secondary" style="font-size: 1.05rem;">Rating: {{ review.rating }} / 5</p>
                </div>
            </div>
        {% empty %}
            <div class="alert alert-light text-center">No reviews yet.</div>
        {% endfor %}
    </div>

<style>
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.12); }
    100% { transform: scale(1); }
}
.fa-user-circle {
    animation-duration: 3s !important;
}
</style>
</div>

{% endblock %}